# YouthLoop API 错误码规范

## 错误码格式

错误码采用 5 位数字格式：`XXYYZ`

- `XX`: 模块代码
- `YY`: 错误类型
- `Z`: 序号

## 模块代码 (XX)

| 代码 | 模块 | 说明 |
|------|------|------|
| 00 | 系统 | 系统级错误 |
| 10 | 认证 | 认证与授权 |
| 20 | 用户 | 用户管理 |
| 30 | 内容 | 科普内容 |
| 40 | 活动 | 活动管理 |
| 50 | 互动 | 评论/点赞/收藏 |
| 60 | 通知 | 通知系统 |
| 70 | 积分 | 积分系统 |
| 80 | 游戏 | 游戏服务 |

## 错误类型 (YY)

| 代码 | 类型 | 说明 |
|------|------|------|
| 00 | 成功 | 操作成功 |
| 01 | 参数错误 | 请求参数不合法 |
| 02 | 业务错误 | 业务逻辑错误 |
| 03 | 权限错误 | 无权限访问 |
| 04 | 资源错误 | 资源不存在 |
| 05 | 状态错误 | 状态不允许操作 |
| 99 | 系统错误 | 系统内部错误 |

## 常用错误码

### 系统级 (00xxx)

| 错误码 | 说明 |
|--------|------|
| 0 | 成功 |
| 00101 | 参数校验失败 |
| 00102 | 参数缺失 |
| 00103 | 参数格式错误 |
| 00991 | 系统内部错误 |
| 00992 | 数据库错误 |
| 00993 | 网络错误 |

### 认证模块 (10xxx)

| 错误码 | 说明 |
|--------|------|
| 10011 | Token 缺失 |
| 10012 | Token 无效 |
| 10013 | Token 已过期 |
| 10021 | 用户已存在 |
| 10022 | 用户不存在 |
| 10023 | 密码错误 |
| 10024 | 验证码错误 |
| 10025 | 验证码已过期 |
| 10031 | 未登录 |
| 10032 | 无权限访问 |

### 用户模块 (20xxx)

| 错误码 | 说明 |
|--------|------|
| 20041 | 用户不存在 |
| 20042 | 用户档案不存在 |
| 20051 | 用户已被封禁 |
| 20052 | 用户状态异常 |

### 内容模块 (30xxx)

| 错误码 | 说明 |
|--------|------|
| 30041 | 内容不存在 |
| 30051 | 内容未发布 |
| 30052 | 内容已下架 |

### 活动模块 (40xxx)

| 错误码 | 说明 |
|--------|------|
| 40041 | 活动不存在 |
| 40051 | 活动未开始 |
| 40052 | 活动已结束 |
| 40053 | 活动已满员 |
| 40054 | 已报名该活动 |

### 互动模块 (50xxx)

| 错误码 | 说明 |
|--------|------|
| 50041 | 评论不存在 |
| 50051 | 评论深度超限 |
| 50052 | 已点赞/收藏 |

### 通知模块 (60xxx)

| 错误码 | 说明 |
|--------|------|
| 60041 | 通知不存在 |

### 积分模块 (70xxx)

| 错误码 | 说明 |
|--------|------|
| 70021 | 积分不足 |
| 70022 | 今日已签到 |

### 游戏模块 (80xxx)

| 错误码 | 说明 |
|--------|------|
| 80041 | 游戏会话不存在 |
| 80051 | 游戏会话已结束 |

## 响应格式

```json
{
  "code": 0,
  "message": "操作成功",
  "data": {},
  "traceId": "a1b2c3d4e5f6g7h8"
}
```

### 字段说明

- `code`: 错误码（0 表示成功）
- `message`: 错误描述（用户可读）
- `data`: 响应数据（成功时返回）
- `traceId`: 请求追踪 ID（用于问题排查）

## 使用示例

### 成功响应

```json
{
  "code": 0,
  "message": "操作成功",
  "data": {
    "userId": "123e4567-e89b-12d3-a456-426614174000",
    "nickname": "张三"
  },
  "traceId": "a1b2c3d4e5f6g7h8"
}
```

### 错误响应

```json
{
  "code": 10023,
  "message": "密码错误",
  "data": null,
  "traceId": "a1b2c3d4e5f6g7h8"
}
```

## 注意事项

1. 错误码必须在文档中定义，不得随意使用未定义的错误码
2. 错误消息应该清晰、友好，避免暴露系统内部信息
3. 所有响应必须包含 traceId，便于问题追踪
4. 前端应根据错误码进行统一的错误处理
