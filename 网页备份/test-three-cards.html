<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三卡片轮播测试</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .carousel-card {
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        .carousel-card > div {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .carousel-card:not(.active) > div:hover {
            transform: scale(1.05) !important;
            opacity: 0.9 !important;
        }
        
        .carousel-card.active > div {
            box-shadow: 0 25px 50px -12px rgba(86, 185, 73, 0.25);
        }
        
        .carousel-indicator {
            cursor: pointer;
        }
        
        .carousel-indicator:hover {
            transform: scale(1.2);
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold mb-8 text-center">三卡片同时显示轮播测试</h1>
        
        <!-- 轮播区域 -->
        <div class="flex items-center justify-between gap-4">
            <!-- 左箭头 -->
            <button id="prev-slide" class="p-3 rounded-full bg-white hover:bg-green-100 text-gray-400 hover:text-green-600 transition-all duration-300 border border-gray-200 shadow-lg hover:shadow-xl hover:scale-105 z-10">
                <i data-lucide="chevron-left" class="w-6 h-6 stroke-2"></i>
            </button>

            <!-- 轮播容器 - 显示三个卡片 -->
            <div class="relative w-full overflow-hidden">
                <div id="carousel-track" class="flex transition-transform duration-500 ease-in-out" style="width: 400%;">
                    
                    <!-- 卡片1: 积分兑换 -->
                    <div class="carousel-card flex-shrink-0" style="width: 25%;">
                        <div class="relative rounded-2xl transition-all duration-500 mx-auto bg-orange-100 border-2 border-orange-300 p-6 text-center" data-card="0">
                            <h3 class="text-lg font-bold text-orange-600 mb-2">积分兑换</h3>
                            <p class="text-sm text-gray-600">累积环保值，兑换好礼</p>
                        </div>
                    </div>

                    <!-- 卡片2: 绿色游戏世界 -->
                    <div class="carousel-card flex-shrink-0" style="width: 25%;">
                        <div class="relative rounded-2xl transition-all duration-500 mx-auto bg-green-500 text-white p-8 text-center" data-card="1">
                            <h3 class="text-xl font-bold mb-2">绿色游戏世界</h3>
                            <p class="text-sm">立即探索</p>
                        </div>
                    </div>

                    <!-- 卡片3: 权威科普 -->
                    <div class="carousel-card flex-shrink-0" style="width: 25%;">
                        <div class="relative rounded-2xl transition-all duration-500 mx-auto bg-blue-100 border-2 border-blue-300 p-6 text-center" data-card="2">
                            <h3 class="text-lg font-bold text-blue-600 mb-2">权威科普</h3>
                            <p class="text-sm text-gray-600">科学数据，值得信赖</p>
                        </div>
                    </div>

                    <!-- 卡片4: 环保活动 -->
                    <div class="carousel-card flex-shrink-0" style="width: 25%;">
                        <div class="relative rounded-2xl transition-all duration-500 mx-auto bg-red-100 border-2 border-red-300 p-6 text-center" data-card="3">
                            <h3 class="text-lg font-bold text-red-600 mb-2">环保活动</h3>
                            <p class="text-sm text-gray-600">参与行动，共建未来</p>
                        </div>
                    </div>

                </div>
            </div>

            <!-- 右箭头 -->
            <button id="next-slide" class="p-3 rounded-full bg-white hover:bg-green-100 text-gray-400 hover:text-green-600 transition-all duration-300 border border-gray-200 shadow-lg hover:shadow-xl hover:scale-105 z-10">
                <i data-lucide="chevron-right" class="w-6 h-6 stroke-2"></i>
            </button>
        </div>
        
        <!-- 指示器 -->
        <div class="flex justify-center gap-2 mt-6">
            <button class="carousel-indicator w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-slide="0"></button>
            <button class="carousel-indicator w-3 h-2 rounded-full bg-green-500 transition-all duration-300 active" data-slide="1"></button>
            <button class="carousel-indicator w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-slide="2"></button>
            <button class="carousel-indicator w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-slide="3"></button>
        </div>

        <div class="mt-8 text-center text-gray-600">
            <p>当前中心卡片: <span id="current-card">绿色游戏世界</span></p>
            <p class="text-sm mt-2">点击左右箭头切换中心卡片，同时显示三个卡片</p>
        </div>
    </div>

    <script>
        // 初始化图标
        lucide.createIcons();

        // 三卡片轮播功能
        let currentSlide = 1; // 默认显示第二个卡片在中心
        const totalSlides = 4;
        const carouselTrack = document.getElementById('carousel-track');
        const indicators = document.querySelectorAll('.carousel-indicator');
        const prevBtn = document.getElementById('prev-slide');
        const nextBtn = document.getElementById('next-slide');
        const currentCardDisplay = document.getElementById('current-card');

        const cardNames = ['积分兑换', '绿色游戏世界', '权威科普', '环保活动'];

        console.log('轮播初始化:', {
            carouselTrack: !!carouselTrack,
            indicators: indicators.length,
            prevBtn: !!prevBtn,
            nextBtn: !!nextBtn
        });

        // 更新轮播位置和样式 - 三卡片同时显示
        function updateCarousel() {
            if (!carouselTrack) return;
            
            console.log('更新轮播到:', currentSlide);
            
            // 计算偏移量，让当前卡片在中心位置
            // 每次移动25%（一个卡片的宽度），让中心卡片居中
            const offset = -(currentSlide - 1) * 25;
            carouselTrack.style.transform = `translateX(${offset}%)`;
            
            // 更新卡片样式
            const cards = document.querySelectorAll('.carousel-card');
            cards.forEach((card, index) => {
                const cardElement = card.querySelector('div[data-card]');
                if (!cardElement) return;
                
                if (index === currentSlide) {
                    // 中心卡片：更大、更突出
                    card.classList.add('active');
                    cardElement.style.width = '300px';
                    cardElement.style.height = '220px';
                    cardElement.style.transform = 'scale(1.1)';
                    cardElement.style.opacity = '1';
                    cardElement.style.zIndex = '10';
                } else {
                    // 侧边卡片：正常大小、稍微透明
                    card.classList.remove('active');
                    cardElement.style.width = '260px';
                    cardElement.style.height = '180px';
                    cardElement.style.transform = 'scale(1)';
                    cardElement.style.opacity = '0.8';
                    cardElement.style.zIndex = '5';
                }
            });
            
            // 更新指示器
            indicators.forEach((indicator, index) => {
                if (index === currentSlide) {
                    indicator.classList.add('active');
                    indicator.style.width = '12px';
                    indicator.style.backgroundColor = '#10b981';
                } else {
                    indicator.classList.remove('active');
                    indicator.style.width = '8px';
                    indicator.style.backgroundColor = '#cbd5e1';
                }
            });

            // 更新当前卡片显示
            if (currentCardDisplay) {
                currentCardDisplay.textContent = cardNames[currentSlide];
            }
        }

        // 下一张
        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateCarousel();
        }

        // 上一张
        function prevSlide() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateCarousel();
        }

        // 跳转到指定幻灯片
        function goToSlide(slideIndex) {
            currentSlide = slideIndex;
            updateCarousel();
        }

        // 绑定事件
        if (nextBtn) {
            nextBtn.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('点击下一张');
                nextSlide();
            });
        }
        
        if (prevBtn) {
            prevBtn.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('点击上一张');
                prevSlide();
            });
        }
        
        // 指示器点击事件
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('点击指示器:', index);
                goToSlide(index);
            });
        });

        // 卡片点击事件
        const carouselCards = document.querySelectorAll('.carousel-card');
        carouselCards.forEach((card, index) => {
            card.addEventListener('click', (e) => {
                e.preventDefault();
                if (index !== currentSlide) {
                    console.log('点击侧边卡片，切换到:', index);
                    goToSlide(index);
                } else {
                    console.log('点击中心卡片:', cardNames[index]);
                    alert(`点击了中心卡片: ${cardNames[index]}`);
                }
            });
        });

        // 初始化
        setTimeout(() => {
            updateCarousel();
        }, 100);
    </script>
</body>
</html>