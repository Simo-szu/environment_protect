<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主页轮播测试</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-100">
    <div class="max-w-6xl mx-auto p-8">
        <h1 class="text-2xl font-bold mb-8 text-center">主页轮播测试</h1>
        
        <!-- 轮播区域 -->
        <section class="relative w-full max-w-6xl mx-auto my-16">
            <div class="flex items-center justify-center gap-4">
                <!-- Left Arrow -->
                <button onclick="moveCarousel(-1)" class="p-3 rounded-full bg-white hover:bg-slate-50 text-slate-300 hover:text-blue-600 transition-all duration-300 border border-slate-100 shadow-sm hover:shadow-md hover:scale-105 group z-10 flex-shrink-0">
                    <i data-lucide="chevron-left" class="w-5 h-5 stroke-[2.5px] group-hover:-translate-x-0.5 transition-transform"></i>
                </button>

                <!-- Carousel Container -->
                <div class="relative w-full max-w-4xl h-80 flex items-center justify-center">
                    <div id="carousel-track" class="flex items-center justify-center gap-4 w-full h-full transition-transform duration-500 ease-in-out">
                        <!-- 卡片1: 积分兑换 -->
                        <div class="carousel-card flex-shrink-0 flex items-center justify-center" style="width: 300px;">
                            <div class="relative rounded-2xl text-center p-6 bg-white border-2 border-orange-200 transition-all duration-500 hover:scale-105" style="width: 280px; height: 200px; opacity: 0.7; transform: scale(0.9);">
                                <div class="flex flex-col items-center justify-center h-full">
                                    <i data-lucide="gift" class="w-8 h-8 mb-4 text-orange-500"></i>
                                    <h3 class="text-lg font-bold mb-2 text-orange-600">积分兑换</h3>
                                    <p class="text-sm text-gray-600 mb-4">累积环保值，兑换好礼</p>
                                    <button class="px-4 py-2 bg-orange-500/20 rounded-full text-sm hover:bg-orange-500/30 transition-colors text-orange-600" style="display: none;">立即探索</button>
                                </div>
                            </div>
                        </div>

                        <!-- 卡片2: 绿色游戏世界 (默认中心卡片) -->
                        <div class="carousel-card flex-shrink-0 flex items-center justify-center active" style="width: 300px;">
                            <div class="relative rounded-2xl text-center p-8 bg-green-500 text-white transition-all duration-500" style="width: 320px; height: 240px; opacity: 1; transform: scale(1); box-shadow: 0 25px 50px -12px rgba(34, 197, 94, 0.4);">
                                <div class="flex flex-col items-center justify-center h-full">
                                    <i data-lucide="gamepad-2" class="w-12 h-12 mb-4"></i>
                                    <h3 class="text-xl font-bold mb-2">绿色游戏世界</h3>
                                    <p class="text-sm mb-4 text-white/80">立即探索</p>
                                    <button class="px-4 py-2 bg-white/20 rounded-full text-sm hover:bg-white/30 transition-colors">立即探索</button>
                                </div>
                            </div>
                        </div>

                        <!-- 卡片3: 权威科普 -->
                        <div class="carousel-card flex-shrink-0 flex items-center justify-center" style="width: 300px;">
                            <div class="relative rounded-2xl text-center p-6 bg-white border-2 border-blue-200 transition-all duration-500 hover:scale-105" style="width: 280px; height: 200px; opacity: 0.7; transform: scale(0.9);">
                                <div class="flex flex-col items-center justify-center h-full">
                                    <i data-lucide="book-open-check" class="w-8 h-8 mb-4 text-blue-600"></i>
                                    <h3 class="text-lg font-bold mb-2 text-blue-600">权威科普</h3>
                                    <p class="text-sm text-gray-600 mb-4">科学数据，值得信赖</p>
                                    <button class="px-4 py-2 bg-blue-500/20 rounded-full text-sm hover:bg-blue-500/30 transition-colors text-blue-600" style="display: none;">立即探索</button>
                                </div>
                            </div>
                        </div>

                        <!-- 卡片4: 环保活动 (隐藏) -->
                        <div class="carousel-card flex-shrink-0 flex items-center justify-center" style="width: 300px; display: none;">
                            <div class="relative rounded-2xl text-center p-6 bg-white border-2 border-red-200 transition-all duration-500 hover:scale-105" style="width: 280px; height: 200px; opacity: 0.7; transform: scale(0.9);">
                                <div class="flex flex-col items-center justify-center h-full">
                                    <i data-lucide="calendar-heart" class="w-8 h-8 mb-4 text-red-500"></i>
                                    <h3 class="text-lg font-bold mb-2 text-red-600">环保活动</h3>
                                    <p class="text-sm text-gray-600 mb-4">参与行动，共建未来</p>
                                    <button class="px-4 py-2 bg-red-500/20 rounded-full text-sm hover:bg-red-500/30 transition-colors text-red-600" style="display: none;">立即探索</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Arrow -->
                <button onclick="moveCarousel(1)" class="p-3 rounded-full bg-white hover:bg-slate-50 text-slate-300 hover:text-blue-600 transition-all duration-300 border border-slate-100 shadow-sm hover:shadow-md hover:scale-105 group z-10 flex-shrink-0">
                    <i data-lucide="chevron-right" class="w-5 h-5 stroke-[2.5px] group-hover:translate-x-0.5 transition-transform"></i>
                </button>
            </div>

            <!-- Indicators -->
            <div class="flex justify-center gap-2 mt-6">
                <button class="carousel-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300 hover:scale-125 cursor-pointer" data-slide="0"></button>
                <button class="carousel-indicator w-3 h-2 rounded-full bg-green-500 transition-all duration-300 active hover:scale-125 cursor-pointer" data-slide="1"></button>
                <button class="carousel-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300 hover:scale-125 cursor-pointer" data-slide="2"></button>
                <button class="carousel-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300 hover:scale-125 cursor-pointer" data-slide="3"></button>
            </div>
        </section>

        <div class="text-center mt-8">
            <p class="text-gray-600">当前显示: <span id="current-display">积分兑换, 绿色游戏世界, 权威科普</span></p>
            <p class="text-sm text-gray-500 mt-2">当前中心卡片: <span id="current-center">绿色游戏世界</span></p>
        </div>
    </div>

    <script>
        // 初始化图标
        lucide.createIcons();

        let currentSlide = 1; // 默认显示第二个卡片（绿色游戏世界）
        const totalSlides = 4;
        const cardNames = ['积分兑换', '绿色游戏世界', '权威科普', '环保活动'];

        // 轮播移动函数
        function moveCarousel(direction) {
            console.log('移动轮播:', direction);
            currentSlide = (currentSlide + direction + totalSlides) % totalSlides;
            updateCarouselDisplay();
        }

        // 更新轮播显示
        function updateCarouselDisplay() {
            const cards = document.querySelectorAll('.carousel-card');
            
            console.log('更新轮播显示，当前位置:', currentSlide);
            
            // 重新排列卡片：让当前选中的卡片在中间
            cards.forEach((card, index) => {
                // 计算相对位置：-1(左), 0(中), 1(右)
                let relativePos = (index - currentSlide + totalSlides) % totalSlides;
                if (relativePos > 2) relativePos -= totalSlides; // 处理循环
                
                if (relativePos === -1 || relativePos === 0 || relativePos === 1) {
                    // 显示三张卡片：左、中、右
                    card.style.display = 'flex';
                    
                    // 更新卡片样式
                    const cardContent = card.querySelector('div');
                    const button = cardContent.querySelector('button');
                    const icon = cardContent.querySelector('i');
                    const title = cardContent.querySelector('h3');
                    const desc = cardContent.querySelector('p');
                    
                    if (relativePos === 0) {
                        // 中心卡片 - 高亮和放大
                        cardContent.style.cssText = `
                            width: 320px !important; 
                            height: 240px !important;
                            opacity: 1 !important;
                            transform: scale(1) !important;
                            transition: all 0.5s ease !important;
                            border-radius: 1.5rem;
                            text-align: center;
                            padding: 2rem;
                            position: relative;
                        `;
                        
                        // 显示按钮
                        if (button) button.style.display = 'block';
                        
                        // 根据卡片类型设置背景色和文字色
                        if (index === 0) { // 积分兑换
                            cardContent.style.backgroundColor = '#F0A32F';
                            cardContent.style.color = '#ffffff';
                            cardContent.style.border = 'none';
                            cardContent.style.boxShadow = '0 25px 50px -12px rgba(240, 163, 47, 0.4)';
                            if (icon) icon.className = 'w-12 h-12 mb-4 text-white';
                            if (title) title.className = 'text-xl font-bold mb-2 text-white';
                            if (desc) desc.className = 'text-sm text-white/80 mb-4';
                        } else if (index === 1) { // 绿色游戏世界
                            cardContent.style.backgroundColor = '#56B949';
                            cardContent.style.color = '#ffffff';
                            cardContent.style.border = 'none';
                            cardContent.style.boxShadow = '0 25px 50px -12px rgba(86, 185, 73, 0.4)';
                            if (icon) icon.className = 'w-12 h-12 mb-4 text-white';
                            if (title) title.className = 'text-xl font-bold mb-2 text-white';
                            if (desc) desc.className = 'text-sm text-white/80 mb-4';
                        } else if (index === 2) { // 权威科普
                            cardContent.style.backgroundColor = '#30499B';
                            cardContent.style.color = '#ffffff';
                            cardContent.style.border = 'none';
                            cardContent.style.boxShadow = '0 25px 50px -12px rgba(48, 73, 155, 0.4)';
                            if (icon) icon.className = 'w-12 h-12 mb-4 text-white';
                            if (title) title.className = 'text-xl font-bold mb-2 text-white';
                            if (desc) desc.className = 'text-sm text-white/80 mb-4';
                        } else if (index === 3) { // 环保活动
                            cardContent.style.backgroundColor = '#EE4035';
                            cardContent.style.color = '#ffffff';
                            cardContent.style.border = 'none';
                            cardContent.style.boxShadow = '0 25px 50px -12px rgba(238, 64, 53, 0.4)';
                            if (icon) icon.className = 'w-12 h-12 mb-4 text-white';
                            if (title) title.className = 'text-xl font-bold mb-2 text-white';
                            if (desc) desc.className = 'text-sm text-white/80 mb-4';
                        }
                    } else {
                        // 侧边卡片 - 缩小和白色背景
                        cardContent.style.cssText = `
                            width: 280px !important; 
                            height: 200px !important;
                            opacity: 0.7 !important;
                            transform: scale(0.9) !important;
                            transition: all 0.5s ease !important;
                            background-color: #ffffff !important;
                            border-radius: 1.5rem;
                            text-align: center;
                            padding: 1.5rem;
                            position: relative;
                            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
                        `;
                        
                        // 隐藏按钮
                        if (button) button.style.display = 'none';
                        
                        // 设置边框和文字颜色
                        if (index === 0) { // 积分兑换
                            cardContent.style.border = '2px solid rgba(240, 163, 47, 0.3)';
                            if (icon) icon.className = 'w-8 h-8 mb-4 text-orange-500';
                            if (title) title.className = 'text-lg font-bold mb-2 text-orange-600';
                            if (desc) desc.className = 'text-sm text-gray-600 mb-4';
                        } else if (index === 1) { // 绿色游戏世界
                            cardContent.style.border = '2px solid rgba(86, 185, 73, 0.3)';
                            if (icon) icon.className = 'w-8 h-8 mb-4 text-green-500';
                            if (title) title.className = 'text-lg font-bold mb-2 text-green-600';
                            if (desc) desc.className = 'text-sm text-gray-600 mb-4';
                        } else if (index === 2) { // 权威科普
                            cardContent.style.border = '2px solid rgba(48, 73, 155, 0.3)';
                            if (icon) icon.className = 'w-8 h-8 mb-4 text-blue-600';
                            if (title) title.className = 'text-lg font-bold mb-2 text-blue-600';
                            if (desc) desc.className = 'text-sm text-gray-600 mb-4';
                        } else if (index === 3) { // 环保活动
                            cardContent.style.border = '2px solid rgba(238, 64, 53, 0.3)';
                            if (icon) icon.className = 'w-8 h-8 mb-4 text-red-500';
                            if (title) title.className = 'text-lg font-bold mb-2 text-red-600';
                            if (desc) desc.className = 'text-sm text-gray-600 mb-4';
                        }
                    }
                } else {
                    // 隐藏其他卡片
                    card.style.display = 'none';
                }
            });
            
            // 更新指示器
            const indicators = document.querySelectorAll('.carousel-indicator');
            indicators.forEach((indicator, index) => {
                if (index === currentSlide) {
                    indicator.classList.add('active');
                    indicator.style.width = '12px';
                    indicator.style.backgroundColor = '#10b981';
                } else {
                    indicator.classList.remove('active');
                    indicator.style.width = '8px';
                    indicator.style.backgroundColor = '#cbd5e1';
                }
            });

            // 更新显示信息
            const currentDisplay = document.getElementById('current-display');
            const currentCenter = document.getElementById('current-center');
            
            if (currentDisplay && currentCenter) {
                // 计算显示的三张卡片
                let displayCards = [];
                for (let i = -1; i <= 1; i++) {
                    let cardIndex = (currentSlide + i + totalSlides) % totalSlides;
                    displayCards.push(cardNames[cardIndex]);
                }
                
                currentDisplay.textContent = displayCards.join(', ');
                currentCenter.textContent = cardNames[currentSlide]; // 当前选中的卡片
            }
        }

        // 跳转到指定幻灯片
        function goToSlide(slideIndex) {
            console.log('跳转到幻灯片:', slideIndex);
            currentSlide = slideIndex;
            updateCarouselDisplay();
        }

        // 初始化轮播
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM加载完成，初始化轮播');
            
            // 设置初始显示
            updateCarouselDisplay();
            
            // 添加指示器点击事件
            const indicators = document.querySelectorAll('.carousel-indicator');
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    console.log('点击指示器:', index);
                    goToSlide(index);
                });
            });
            
            console.log('轮播初始化完成');
        });
    </script>
</body>
</html>