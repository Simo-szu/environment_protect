# 支柱二：游戏设计与用户体验 (Game Design & User Experience)

**版本：1.0**
**关联蓝图版本：1.0**

## 1.0 文档目标与原则
本文件旨在定义用户与“My Digital Biome”的互动方式、界面布局和整体体验流程。它是项目的“心脏”，确保科学内核（支柱一）能以一种引人入胜、易于理解的方式呈现给用户。

### 核心指导原则：

- **引导而非说教 (Guide, Don't Preach)**: 设计的核心是引导用户自己去发现和感受，而不是单向地灌输知识。

- **清晰胜于复杂 (Clarity Over Complexity)**: 界面必须直观，信息层级分明。用户应能在5秒内理解屏幕上各个区域的功能。

- **情感化设计 (Emotional Design)**: 利用视觉、文字和互动反馈，在用户和他们的“数字池塘”之间建立情感联系。池塘的“健康”或“衰败”应该能引发用户的情感共鸣。

- **即时反馈 (Immediate Feedback)**: 用户的每一个重要操作都应得到即时、清晰的视觉或听觉反馈。

## 2.0 核心玩法循环与用户流程 (Core Loop & User Flow)
我们将蓝图中定义的用户旅程，细化为一个可执行的游戏流程。

### 流程图:
```
[开始] -> [Stage 1: 观察] -> (用户准备好后) -> [Stage 2: 干预] -> (用户做出选择后) -> [Stage 3: 见证] -> (50年模拟结束后) -> [Stage 4: 修复] -> [开放式结局]
```

### 阶段性目标:

- **Stage 1**: 建立情感基线。让用户爱上这个原始、健康的池塘。
- **Stage 2**: 制造决策焦点。这是整个故事的唯一转折点，必须有仪式感。
- **Stage 3**: 创造认知冲击。通过加速的时间和戏剧化的衰败过程，让用户直面自己选择的后果。
- **Stage 4**: 引发深度思考。修复阶段不追求“完美结局”，而是让用户理解生态恢复的复杂性和长期性。

## 3.0 界面(UI)线框图与布局 (UI Wireframe & Layout)

整个应用将采用三栏式布局，确保信息和功能分区的绝对清晰。

### 布局草图:

+------------------------------------------------------+
|                      顶部导航栏 (Header)               |
|         (项目标题: My Digital Biome | 信息按钮)         |
+------------------------------------------------------+
|                                                      |
|        主视觉区 (Main Visualizer) - 65% 屏幕宽度       |
|                                                      |
|   (池塘的动态横截面视图，所有视觉变化发生在此)           |
|                                                      |
|                                                      |
|                                                      |
+------------------------------------------------------+
|      右侧信息与控制面板 (Side Panel) - 35% 屏幕宽度    |
+------------------------------------------------------+
|                                                      |
|          数据仪表盘 (Data Dashboard)                  |
|          (关键变量的实时折线图)                        |
|                                                      |
+------------------------------------------------------+
|                                                      |
|          互动控制区 (Interaction Controls)            |
|          (时间控制、干预/修复按钮)                     |
|                                                      |
+------------------------------------------------------+
|             事件日志 (Event Log) - 固定底部            |
|   (滚动显示的文本信息，播报关键事件)                   |
+------------------------------------------------------+

3.1 主视觉区 (Main Visualizer)
功能: 生态系统的“脸”。所有生物和环境的视觉变化都在此发生。

设计要点:

背景: 采用分层背景，描绘出水下、水面和岸边的景象。

水体: 水的颜色和透明度（CSS background-color 和 opacity）将直接与 nutrients 和 waterTurbidity 变量绑定。

生物:

水生植物 (aquaticPlants): 数量和“健康度”（颜色从翠绿到枯黄）与变量绑定。

鱼类 (smallFish, largeFish): 用简单的SVG图标表示。图标的数量和游动速度与变量绑定。当种群数量低于某个阈值时，图标从屏幕上消失。

特效:

藻类水华 (phytoplankton > 70): 水体变为不透明的深绿色，并出现漂浮的绿色粒子效果。

曝气机 (Aerator 激活): 从池塘底部持续冒出简单的气泡粒子。

### 3.2 右侧信息与控制面板 (Side Panel)

#### A. 数据仪表盘 (Data Dashboard)
功能: 生态系统的“心电图”。揭示肉眼看不见的内在变化。

设计要点:

图表类型: 使用一个多条折线的实时图表（推荐使用 Recharts 库）。

X轴: 模拟时间（年份）。

Y轴: 变量数值 (0-100)。

默认显示曲线:

dissolvedOxygen (溶解氧) - 关键生存指标，用 蓝色 线。

nutrients (营养物) - 关键污染指标，用 棕色 或 紫色 线。

smallFish (小型鱼类) - 关键物种指标，用 绿色 线。

交互: 鼠标悬停在曲线上时，高亮显示该曲线，并显示具体数值。

#### B. 互动控制区 (Interaction Controls)
功能: 用户与世界互动的主要区域。其内容会根据不同阶段动态变化。

#### 阶段性UI变化:

Stage 1 (观察):

时间控制: [▶️ 播放] / [⏸️ 暂停] 按钮, [⏩ 快进 (x10)] 按钮。

主按钮 (灰色禁用): [...等待指令...]

引导文本: 显示Stage 1的引导文案。

Stage 2 (干预):

时间自动暂停。

主按钮 (高亮): [引入农业径流]

交互: 点击按钮后，弹出一个确认模态框 (Modal)，内容为：“你确定要引入农业径流吗？这个选择将永久改变这个世界。” 增加操作的“仪式感”。

Stage 3 (见证):

时间自动以10倍速播放。

所有干预按钮消失。

只保留 [⏸️ 暂停] 按钮，允许用户停下来仔细观察崩溃的某个瞬间。

Stage 4 (修复):

时间恢复正常速度控制。

主按钮: [✅ 启用曝气机], [✅ 种植河岸缓冲带]。按钮为开关（Toggle）形式，可以随时启用或禁用。

资源显示: （可选高级功能）可以显示一个“修复点数”，限制用户能使用的工具数量。对于MVP，可以不设限制。

### 3.3 事件日志 (Event Log)

功能: 系统的“旁白”。用文字明确告知用户发生了什么关键事件，增强叙事性。

#### 设计要点:

- **位置**: 固定在屏幕底部，不打扰主视觉区。
- **样式**: 新事件从底部推入，旧事件向上滚动。
- **分类高亮**:
  - [事件] (中性): 白色文字。
  - [警告] (负面): 黄色文字。
  - [灾难] (严重负面): 红色文字。

## 4.0 叙事与模态框设计 (Narrative & Modal Design)
模态框（Modal Pop-ups）是分隔不同游戏阶段、传递核心叙事信息的关键工具。

进入Stage 1: 页面加载后，一个简介模态框介绍项目背景。

进入Stage 2: 当用户点击Stage 1的主按钮（或满足一定观察时间后），弹出Stage 2的引导模态框，解释“干预”的意义。

进入Stage 3: 用户在Stage 2确认干预后，一个全屏过渡动画（例如水波纹效果）后，弹出Stage 3的引导模态框。

进入Stage 4: 50年模拟结束后，时间暂停，弹出Stage 4的引导模态框，告知池塘的现状并介绍修复工具。

这份文档为我们项目的“心脏”提供了清晰的蓝图。它确保了用户的每一步操作都是被精心设计和引导的，最终服务于我们的核心愿景——创造一个能讲述“生态故事”的强大模拟器。